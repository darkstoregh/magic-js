"use strict";var MagicTaquitoExtension=(()=>{var b=Object.create;var o=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var K=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty;var S=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),T=(r,t)=>{for(var i in t)o(r,i,{get:t[i],enumerable:!0})},y=(r,t,i,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of x(t))!d.call(r,n)&&n!==i&&o(r,n,{get:()=>t[n],enumerable:!(e=P(t,n))||e.enumerable});return r};var R=(r,t,i)=>(i=r!=null?b(K(r)):{},y(t||!r||!r.__esModule?o(i,"default",{value:r,enumerable:!0}):i,r)),k=r=>y(o({},"__esModule",{value:!0}),r);var s=(r,t,i)=>new Promise((e,n)=>{var q=a=>{try{p(i.next(a))}catch(g){n(g)}},f=a=>{try{p(i.throw(a))}catch(g){n(g)}},p=a=>a.done?e(a.value):Promise.resolve(a.value).then(q,f);p((i=i.apply(r,t)).next())});var l=S((v,m)=>{m.exports=Magic});var w={};T(w,{default:()=>U});var h=R(l());var c=class{constructor(t,i,e){this.pkh=t;this.pK=i;this.magic=e}publicKeyHash(){return s(this,null,function*(){return this.pkh})}publicKey(){return s(this,null,function*(){return this.pK})}secretKey(){return s(this,null,function*(){throw new Error("Secret key cannot be exposed")})}sign(t,i){return s(this,null,function*(){return this.magic.request(this.magic.utils.createJsonRpcRequestPayload("taquito_sign",[{bytes:t,watermark:i}]))})}};var u=class extends h.Extension.Internal{constructor(i){super();this.taquitoConfig=i;this.name="taquito";this.config={};this.config={rpcUrl:i.rpcUrl}}getPublicKey(){return s(this,null,function*(){return this.request(this.utils.createJsonRpcRequestPayload("taquito_getPublicKeyAndHash",[]))})}sign(i,e){return s(this,null,function*(){return this.request(this.utils.createJsonRpcRequestPayload("taquito_sign",[{bytes:i,watermark:e}]))})}createMagicSigner(){return s(this,null,function*(){let{pk:i,pkh:e}=yield this.getPublicKey();return new c(e,i,this)})}};var U=u;return k(w);})();
if (MagicTaquitoExtension && MagicTaquitoExtension.default != null) { MagicTaquitoExtension = Object.assign(MagicTaquitoExtension.default, MagicTaquitoExtension); delete MagicTaquitoExtension.default; }
