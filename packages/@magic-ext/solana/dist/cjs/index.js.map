{
  "version": 3,
  "sources": ["../../src/index.ts"],
  "sourcesContent": ["import { Extension } from '@magic-sdk/commons';\n\n/* eslint-disable no-param-reassign, array-callback-return */\nimport { SolanaConfig, SolanaPayloadMethod, SerializeConfig } from './type';\n\nexport class SolanaExtension extends Extension.Internal<'solana', any> {\n  name = 'solana' as const;\n  config: any = {};\n\n  constructor(public solanaConfig: SolanaConfig) {\n    super();\n\n    this.config = {\n      rpcUrl: solanaConfig.rpcUrl,\n      chainType: 'SOLANA',\n    };\n  }\n\n  public sendAndConfirmTransaction = (transaction: any, options?: any) => {\n    const { instructions } = transaction;\n\n    instructions.map((instruction: any) => {\n      instruction.programId = instruction.programId.toBase58();\n    });\n\n    return this.request({\n      id: 42,\n      jsonrpc: '2.0',\n      method: SolanaPayloadMethod.SendTransaction,\n      params: {\n        instructions,\n        options,\n      },\n    });\n  };\n\n  public signTransaction = (transaction: any, serializeConfig?: SerializeConfig) => {\n    const { instructions } = transaction;\n\n    const magicInstructions = instructions.map((i: any) => {\n      return {\n        ...i,\n        keys: i.keys.map((k: any) => {\n          return { ...k, pubkey: k.pubkey.toBase58() };\n        }),\n        programId: i.programId.toBase58(),\n      };\n    });\n\n    const params = {\n      feePayer: transaction.feePayer.toBase58(),\n      instructions: magicInstructions,\n      recentBlockhash: transaction.recentBlockhash,\n      serializeConfig,\n    };\n\n    return this.request({\n      id: 42,\n      jsonrpc: '2.0',\n      method: SolanaPayloadMethod.SignTransaction,\n      params,\n    });\n  };\n\n  public signMessage = (message: any) => {\n    return this.request({\n      id: 42,\n      jsonrpc: '2.0',\n      method: SolanaPayloadMethod.SignMessage,\n      params: {\n        message,\n      },\n    });\n  };\n}\n"],
  "mappings": "owBAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,qBAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAA0B,8BAKnB,IAAMC,EAAN,cAA8B,YAAU,QAAwB,CAIrE,YAAmBC,EAA4B,CAC7C,MAAM,EADW,kBAAAA,EAHnB,UAAO,SACP,YAAc,CAAC,EAWf,KAAO,0BAA4B,CAACC,EAAkBC,IAAkB,CACtE,GAAM,CAAE,aAAAC,CAAa,EAAIF,EAEzB,OAAAE,EAAa,IAAKC,GAAqB,CACrCA,EAAY,UAAYA,EAAY,UAAU,SAAS,CACzD,CAAC,EAEM,KAAK,QAAQ,CAClB,GAAI,GACJ,QAAS,MACT,6BACA,OAAQ,CACN,aAAAD,EACA,QAAAD,CACF,CACF,CAAC,CACH,EAEA,KAAO,gBAAkB,CAACD,EAAkBI,IAAsC,CAChF,GAAM,CAAE,aAAAF,CAAa,EAAIF,EAEnBK,EAAoBH,EAAa,IAAKI,GACnCC,EAAAC,EAAA,GACFF,GADE,CAEL,KAAMA,EAAE,KAAK,IAAKG,GACTF,EAAAC,EAAA,GAAKC,GAAL,CAAQ,OAAQA,EAAE,OAAO,SAAS,CAAE,EAC5C,EACD,UAAWH,EAAE,UAAU,SAAS,CAClC,EACD,EAEKI,EAAS,CACb,SAAUV,EAAY,SAAS,SAAS,EACxC,aAAcK,EACd,gBAAiBL,EAAY,gBAC7B,gBAAAI,CACF,EAEA,OAAO,KAAK,QAAQ,CAClB,GAAI,GACJ,QAAS,MACT,6BACA,OAAAM,CACF,CAAC,CACH,EAEA,KAAO,YAAeC,GACb,KAAK,QAAQ,CAClB,GAAI,GACJ,QAAS,MACT,yBACA,OAAQ,CACN,QAAAA,CACF,CACF,CAAC,EA5DD,KAAK,OAAS,CACZ,OAAQZ,EAAa,OACrB,UAAW,QACb,CACF,CA0DF",
  "names": ["src_exports", "__export", "SolanaExtension", "__toCommonJS", "import_commons", "SolanaExtension", "solanaConfig", "transaction", "options", "instructions", "instruction", "serializeConfig", "magicInstructions", "i", "__spreadProps", "__spreadValues", "k", "params", "message"]
}
