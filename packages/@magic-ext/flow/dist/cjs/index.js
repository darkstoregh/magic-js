"use strict";var F=Object.create;var p=Object.defineProperty,N=Object.defineProperties,U=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,x=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var d=(e,s,n)=>s in e?p(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,y=(e,s)=>{for(var n in s||(s={}))w.call(s,n)&&d(e,n,s[n]);if(g)for(var n of g(s))A.call(s,n)&&d(e,n,s[n]);return e},h=(e,s)=>N(e,b(s));var I=(e,s)=>{for(var n in s)p(e,n,{get:s[n],enumerable:!0})},k=(e,s,n,f)=>{if(s&&typeof s=="object"||typeof s=="function")for(let t of j(s))!w.call(e,t)&&t!==n&&p(e,t,{get:()=>s[t],enumerable:!(f=U(s,t))||f.enumerable});return e};var T=(e,s,n)=>(n=e!=null?F(x(e)):{},k(s||!e||!e.__esModule?p(n,"default",{value:e,enumerable:!0}):n,e)),_=e=>k(p({},"__esModule",{value:!0}),e);var u=(e,s,n)=>new Promise((f,t)=>{var a=o=>{try{i(n.next(o))}catch(r){t(r)}},l=o=>{try{i(n.throw(o))}catch(r){t(r)}},i=o=>o.done?f(o.value):Promise.resolve(o.value).then(a,l);i((n=n.apply(e,s)).next())});var z={};I(z,{FlowExtension:()=>m});module.exports=_(z);var q=require("@magic-sdk/commons"),c=T(require("@onflow/fcl"));var m=class extends q.Extension.Internal{constructor(n){super();this.flowConfig=n;this.name="flow";this.config={};this.authorization=(...f)=>u(this,[...f],function*(n={}){c.config().put("accessNode.api",this.config.rpcUrl);let t=yield this.request({id:42,jsonrpc:"2.0",method:"flow_getAccount",params:{}}),a=0,l;if(n.role.proposer){let o=yield c.send([c.getAccount(t)]);l=(yield c.decode(o)).keys[a].sequenceNumber}let i=o=>u(this,null,function*(){let r=yield this.request({id:42,jsonrpc:"2.0",method:"flow_signTransaction",params:{message:o.message}});return{addr:t,keyId:a,signature:r}});return h(y({},n),{addr:t,keyId:a,signingFunction:i,sequenceNum:l})});this.config={rpcUrl:n.rpcUrl,chainType:"FLOW",network:n.network}}};
//# sourceMappingURL=index.js.map
