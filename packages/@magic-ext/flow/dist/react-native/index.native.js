"use strict";var x=Object.create;var p=Object.defineProperty,F=Object.defineProperties,N=Object.getOwnPropertyDescriptor,U=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,j=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var d=(n,o,e)=>o in n?p(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e,y=(n,o)=>{for(var e in o||(o={}))w.call(o,e)&&d(n,e,o[e]);if(g)for(var e of g(o))A.call(o,e)&&d(n,e,o[e]);return n},h=(n,o)=>F(n,U(o));var I=(n,o)=>{for(var e in o)p(n,e,{get:o[e],enumerable:!0})},k=(n,o,e,f)=>{if(o&&typeof o=="object"||typeof o=="function")for(let t of b(o))!w.call(n,t)&&t!==e&&p(n,t,{get:()=>o[t],enumerable:!(f=N(o,t))||f.enumerable});return n};var T=(n,o,e)=>(e=n!=null?x(j(n)):{},k(o||!n||!n.__esModule?p(e,"default",{value:n,enumerable:!0}):e,n)),_=n=>k(p({},"__esModule",{value:!0}),n);var m=(n,o,e)=>new Promise((f,t)=>{var a=s=>{try{i(e.next(s))}catch(r){t(r)}},l=s=>{try{i(e.throw(s))}catch(r){t(r)}},i=s=>s.done?f(s.value):Promise.resolve(s.value).then(a,l);i((e=e.apply(n,o)).next())});var z={};I(z,{FlowExtension:()=>u});module.exports=_(z);var q=require("@magic-sdk/commons"),c=T(require("@onflow/fcl"));var u=class extends q.Extension.Internal{constructor(e){super();this.flowConfig=e;this.name="flow";this.config={};this.authorization=(...f)=>m(this,[...f],function*(e={}){c.config().put("accessNode.api",this.config.rpcUrl);let t=yield this.request({id:42,jsonrpc:"2.0",method:"flow_getAccount",params:{}}),a=0,l;if(e.role.proposer){let s=yield c.send([c.getAccount(t)]);l=(yield c.decode(s)).keys[a].sequenceNumber}let i=s=>m(this,null,function*(){let r=yield this.request({id:42,jsonrpc:"2.0",method:"flow_signTransaction",params:{message:s.message}});return{addr:t,keyId:a,signature:r}});return h(y({},e),{addr:t,keyId:a,signingFunction:i,sequenceNum:l})});this.config={rpcUrl:e.rpcUrl,chainType:"FLOW",network:e.network}}};
//# sourceMappingURL=index.native.js.map
